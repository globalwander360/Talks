@Test
void testGetFetchDocToBeSentToCXT_NotFound() {
    String boppuid = "BOP123";
    when(mockRequest.getEventId()).thenReturn("EVT001");

    HttpStatusCodeException notFoundException = mock(HttpStatusCodeException.class);
    when(notFoundException.getStatusCode()).thenReturn(HttpStatus.NOT_FOUND);

    when(documentApi.getDocumentMetaDataByReqOrEventId("EVT001", boppuid, true))
            .thenThrow(notFoundException);

    List<DocumentMetaDataDocstoreWithVersioning> result =
            documentService.getFetchDocToBeSentToCXT(mockRequest, boppuid);

    assertNull(result);
}

@Test
void testGetFetchDocToBeSentToCXT_OtherHttpError() {
    String boppuid = "BOP123";
    when(mockRequest.getEventId()).thenReturn("EVT001");

    HttpStatusCodeException internalError = mock(HttpStatusCodeException.class);
    when(internalError.getStatusCode()).thenReturn(HttpStatus.INTERNAL_SERVER_ERROR);
    when(internalError.getResponseBodyAsString()).thenReturn("Server Error");

    when(documentApi.getDocumentMetaDataByReqOrEventId("EVT001", boppuid, true))
            .thenThrow(internalError);

    assertThrows(BatchException.class,
            () -> documentService.getFetchDocToBeSentToCXT(mockRequest, boppuid));
}
