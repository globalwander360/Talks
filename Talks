<changeSet id="create-dpw-cxt-prod-code-table" author="harish.semwal">
    <createTable tableName="DPW_CxT_Prod_Code">
        <column name="id" type="INT" autoIncrement="true">
            <constraints primaryKey="true" nullable="false" />
        </column>
        <column name="productCode" type="VARCHAR(5)">
            <constraints nullable="false" />
        </column>
    </createTable>

    <addCheckConstraint
        tableName="DPW_CxT_Prod_Code"
        constraintName="chk_product_code_valid"
        checkCondition="productCode IN ('EC', 'EL', 'LC', 'IC')" />
</changeSet>


package com.yourpackage.model;

import jakarta.persistence.*;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;

@Entity
@Table(name = "DPW_CxT_Prod_Code")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class DpwCxtProdCode {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @Column(name = "productCode", nullable = false, length = 5)
    private String productCode;
}

responses:
  '200':
    description: Success
    content:
      application/json:
        schema:
          type: array
          items:
            $ref: '#/components/schemas/DpwCxtProdCode'



paths:
  /cxt-prod-code:
    get:
      tags:
        - StaticData
      summary: Track and trace mapping between Status in Conserto and sub_tnx_type_code
      description: Returns list of supported product codes
      operationId: getCxtProdCode
      parameters:
        - in: header
          name: bnppuid
          required: true
          schema:
            type: string
        - in: query
          name: id
          required: false
          schema:
            type: integer
        - in: query
          name: productCode
          required: false
          schema:
            type: string
            enum: [EC, EL, LC, IC]
      responses:
        '200':
          $ref: './response.yaml#/DpwCxtProdCodeListResponse'
        '400':
          $ref: '../common-specs/common-errors.yaml#/BadRequestError'
        '401':
          $ref: '../common-specs/common-errors.yaml#/UnauthorizedError'
        '403':
          $ref: '../common-specs/common-errors.yaml#/ForbiddenError'
        '404':
          $ref: '../common-specs/common-errors.yaml#/NotFoundError'
        '429':
          $ref: '../common-specs/common-errors.yaml#/TooManyRequestsError'
        '500':
          $ref: '../common-specs/common-errors.yaml#/InternalServerError'
        '502':
          $ref: '../common-specs/common-errors.yaml#/BadGatewayError'
        '503':
          $ref: '../common-specs/common-errors.yaml#/ServiceUnavailableError'

DpwCxtProdCode:
  type: object
  properties:
    id:
      type: integer
      example: 1
    productCode:
      type: string
      enum: [EC, EL, LC, IC]
      example: EC



DpwCxtProdCodeResponse:
  description: Single product code response
  content:
    application/json:
      schema:
        $ref: './schemas.yaml#/DpwCxtProdCode'

DpwCxtProdCodeListResponse:
  description: List of product codes
  content:
    application/json:
      schema:
        type: array
        items:
          $ref: './schemas.yaml#/DpwCxtProdCode'
