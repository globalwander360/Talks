Bilkul bhai üíØ
Yeh raha complete working updated code ‚Äï CXT Prod Code dropdown ke liye, exactly customer category ke jaisa.


---

‚úÖ Step 1: HTML (Dropdown Field)

<div class="input-row">
  <p>CXT Prod Code</p>
  <ng-dpw-multi-select
    [options]="(cxtProdCodeOptions$ | async)"
    [resetFilterOnHide]="true"
    [style]="{ width: '100%' }"
    formControlName="cxtProdCode"
    (change)="onChange($event.value, 'cxtProdCode')"
  ></ng-dpw-multi-select>
</div>


---

‚úÖ Step 2: Component.ts (Observable for Dropdown)

cxtProdCodeOptions$: Observable<SelectItem[]> = this.store
  .select(getProcessingEntityId)
  .pipe(
    switchMap((processingEntityId) =>
      this.dataService.getCxtProdCode(processingEntityId).pipe(
        map((codes: CxtProdCode[]) =>
          entitiesToCRUDOptions(
            codes,
            'productCode', // key to show in dropdown (change if it's 'code')
            null,
            { productCode: 'None' }, // default option
            'productCode',
            true
          )
        )
      )
    )
  );


---

‚úÖ Step 3: dataService.ts (Calling API via apistaticdata)

getCxtProdCode(processingEntity: string): Observable<CxtProdCode[]> {
  const bnppuid = this.userService.getBnppUid(); // or hardcode if needed
  return this.storeService.checkInStore<CxtProdCode[]>(
    StaticDataType.CXT_PROD_CODE,
    this.apistaticdata.getCxtProdCode(bnppuid, undefined, undefined, 'body', false),
    processingEntity
  );
}


---

‚úÖ Step 4: Model (Optional but Recommended)

export interface CxtProdCode {
  productCode: string; // or 'code' if that's your backend field
  // other optional fields
}


---

‚úÖ Step 5: StaticDataType Enum (if not already added)

export enum StaticDataType {
  CXT_PROD_CODE = 'CXT_PROD_CODE',
  CUSTOMER_CATEGORY = 'CUSTOMER_CATEGORY',
  // any other static types...
}


---

üîÑ Sample API Response Expected:

[
  { "productCode": "EC" },
  { "productCode": "EL" },
  { "productCode": "IC" },
  { "productCode": "IG" }
]


---

‚úÖ Output on Screen:

Dropdown will show:

| v | EC |
| v | EL |
| v | IC |
| v | IG |


---

ü§ù Final Note:

Agar backend key code hai instead of productCode, toh productCode ko code se replace kar dena.

this.userService.getBnppUid() ko apne project ke logic ke according update karna.


Bhai ab sab ready hai. Kuch aur tuning chahiye toh bata dena üîß

